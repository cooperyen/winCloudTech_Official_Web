import{_ as oe}from"./CDuS1gih.js";import{_ as ae}from"./VwCdnJSJ.js";import{_ as ce}from"./DXXALQq2.js";import{_ as le}from"./Cksi9jlC.js";import{e as ee,g as te,v as re,C as ie,c as a,a as t,b as C,t as r,w as q,o,d as K,h as e,k as Y,D as N,E as de,r as k,q as ue,F as E,i as M,G as W,H as L,n as V,I as Q,f as ne,l as H,z as X,J as se,A as pe}from"./weGZ5Ckw.js";import"./3fbwlYpu.js";const me={class:"fixed bg-primary/60 w-full h-full top-0 left-0 z-50"},fe={class:"fixed left-1/2 top-1/2 z-40 w-full max-w-[400px] bg-white -translate-x-1/2 -translate-y-1/2 rounded-2xl"},he={class:"p-8 grid gap-y-8"},ge={class:"w-full max-w-[120px] mx-auto"},ve={class:"text-center"},_e={class:"text-lg font-bold text-[#2e6d57] leading-5"},xe={class:"mt-8"},ye={class:"flex gap-1 justify-center items-center"},be=ee({__name:"notify",props:{content:{type:String,required:!0}},emits:["confirm"],setup(A,{emit:f}){const{$langHandler:x}=te(),D=f,T=A;return re(()=>{const h=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=`${h}px`;const B=document.querySelector("main");B.style.zIndex="59"}),ie(()=>{document.body.style.overflow="",document.body.style.paddingRight="";const h=document.querySelector("main");h.style.zIndex=""}),(h,B)=>{const y=oe,b=ae,p=le;return o(),a("div",me,[t("div",fe,[t("div",he,[t("div",ge,[C(y,{alt:"email",path:"./images/content/email.svg"})]),t("div",ve,[t("h2",_e,r(T.content),1),t("div",xe,[C(p,{onClick:B[0]||(B[0]=z=>D("confirm"))},{default:q(()=>[t("span",ye,[C(b,{class:"mt-0.5",size:"20",icon:"mdiCloseCircle"}),K(" "+r(e(x)("common.closeWindow")),1)])]),_:1})])])])])])}}}),we={class:"fixed bg-primary/60 w-full h-full top-0 left-0 z-50"},$e={class:"fixed left-1/2 top-1/2 z-40 max-w-[800px] w-[calc(100%_-_30px)] h-[calc(100%_-_100px)] max-h-[700px] overflow-y-auto -translate-x-1/2 -translate-y-1/2 rounded-xl"},ke={class:"bg-white p-8 relative"},Ce={class:"mb-10"},Ae={class:"text-2xl font-bold"},Be={class:"mb-2"},ze={class:"grid gap-10"},Pe={class:"mb-2 font-bold text-lg"},Re={key:0,class:"list-disc pl-6 grid gap-1"},Se={class:"mt-10 pt-5 border-t border-primary/20"},Ie=["checked"],Ve={for:"_checkbox",class:"ml-2"},Ee=["data-sitekey"],Te={class:"grid grid-cols-2 gap-5 mt-10"},Me="contact.privacy",De=ee({__name:"Privacy",props:{agreeCheck:{type:Boolean},agreeCheckModifiers:{},captchaVerified:{type:Boolean},captchaVerifiedModifiers:{},recaptchaResponse:{},recaptchaResponseModifiers:{},verifiedAllPass:{type:[Boolean,null]},verifiedAllPassModifiers:{},privacyOpen:{type:Boolean},privacyOpenModifiers:{}},emits:["update:agreeCheck","update:captchaVerified","update:recaptchaResponse","update:verifiedAllPass","update:privacyOpen"],setup(A){const{$langHandler:f}=te(),x=l=>f(`${Me}.${l}`).value,D=x("content"),T=Y(()=>(p.value&&h.value)??!1),h=N(A,"agreeCheck"),B=()=>{S.value=!1,p.value=!1,h.value=!1,j.value=!1},{public:{reCAPTCHA_FRONT:y}}=de(),b=y,p=N(A,"captchaVerified"),z=N(A,"recaptchaResponse"),S=N(A,"verifiedAllPass"),U=k(null),j=N(A,"privacyOpen"),{locale:Z}=ue(),w=Y(()=>({en:"en-US",tw:"zh-TW",id:"id-ID"})[Z.value]),G=()=>new Promise((l,u)=>{const v=document.createElement("script");v.src="https://www.google.com/recaptcha/api.js?render=explicit",v.async=!0,v.onload=()=>{l()},v.onerror=_=>{console.error("Error loading reCAPTCHA script:",_),u(_)},document.head.appendChild(v)}),g=()=>{if(window.grecaptcha&&U.value)try{setTimeout(()=>{window.grecaptcha.render(U.value,{sitekey:b,theme:"light",hl:w.value,callback:l=>{p.value=!0,z.value=l}})},500)}catch(l){console.error("Error initializing reCAPTCHA:",l)}else console.error("is not available.")};return re(()=>{const l=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=`${l}px`;const u=document.querySelector("main");u.style.zIndex="59",G().then(()=>{g()}).catch(v=>{console.error("Failed to load reCAPTCHA script:",v)})}),ie(()=>{document.body.style.overflow="",document.body.style.paddingRight="";const l=document.querySelector("main");l.style.zIndex=""}),(l,u)=>{const v=le;return o(),a("div",we,[t("div",$e,[t("section",ke,[t("div",Ce,[t("h1",Ae,r(x("title")),1),t("h2",Be,r(x("subTitle")),1)]),t("div",ze,[(o(!0),a(E,null,M(e(D),(_,F)=>(o(),a("div",{key:F},[t("h3",Pe,r(_.title),1),(o(!0),a(E,null,M(_.text,(m,J)=>(o(),a("div",{key:J,class:"grid gap-2 my-2"},[t("p",null,r(m.title),1),m.loop?(o(),a("ul",Re,[(o(!0),a(E,null,M(m.loop,(d,s)=>(o(),a("li",{key:s},r(d),1))),128))])):W("",!0)]))),128))]))),128))]),t("div",Se,[t("input",{id:"_checkbox",type:"checkbox",class:"accent-secondary",checked:h.value,onClick:u[0]||(u[0]=_=>h.value=!h.value)},null,8,Ie),t("label",Ve,r(x("agreeAll")),1),t("div",{ref_key:"recaptchaContainer",ref:U,class:"mt-3","data-sitekey":e(b)},null,8,Ee)]),t("div",Te,[C(v,{onClick:L(B,["prevent"])},{default:q(()=>[K(r(x("disagree")),1)]),_:1}),C(v,{disabled:!e(T),class:V([{"opacity-30":!e(T)},"bg-secondary"]),onClick:u[1]||(u[1]=_=>(S.value=!0,j.value=!1))},{default:q(()=>[K(r(x("submit")),1)]),_:1},8,["disabled","class"])])])])])}}}),Ue={class:"w-full max-h-[800px] overflow-hidden absolute top-0 left-0 -z-10"},Fe={class:"after:top-0 after:left-0 after:absolute after:block after:content='' after:w-full after:h-full after:bg-linear-[-35deg,rgba(45,49,62,1)_0%,rgba(45,49,62,.99)_21%,rgba(45,49,62,.98)_43%,rgba(45,49,62,.92)_61%,rgba(45,49,62,0)_100%] before:top-0 before:left-0 before:absolute before:block before:content='' before:w-full before:h-full before:bg-linear-[10deg,rgba(45,49,62,100)_0%,rgba(45,49,62,0)_100%]"},Oe={class:"lg:flex lg:justify-between lg:max-xl:px-6 lg:gap-8"},Ne={class:"text-white max-w-[650px] max-lg:mx-auto"},He={class:"font-bold text-[52px] max-sm:text-4xl leading-[1.3]"},We={key:0,class:"block text-secondary"},je={key:1},Le={class:"mt-8 text-2xl max-sm:text-xl"},qe={class:"grid gap-10 mt-12"},Ke={class:"font-bold text-xl max-sm:text-lg"},Ze={class:"text-white flex items-center"},Ge={class:"bg-[#D5BD84]/40 text-[#D5BD84] p-1 rounded-full mr-3"},Je={class:"grid gap-5"},Qe=["onUpdate:modelValue","onKeydown"],Xe=["onUpdate:modelValue","onKeydown"],Ye={class:"text-white mt-4 my-5"},et=["checked"],tt=["disabled"],nt={key:0},R="contact",ct=ee({__name:"contact",setup(A){const{$langHandler:f}=te(),x=f(`${R}.title`),D=f(`${R}.description`),T=f(`${R}.send`),h=f(`${R}.privacy.readPrivacy`),B=f(`${R}.sent`),y=k(!1),b=k(!1),p=k(!1),z=k(null),S=k(!1),U=Y(()=>{const d=x.value,s=[],O=/\[\[highlight\]\](.*?)\[\[\/highlight\]\]/g;let $=0;return d.replace(O,(I,i,n)=>($<n&&s.push({text:d.slice($,n),highlight:!1}),s.push({text:i,highlight:!0}),$=n+I.length,I)),$<d.length&&s.push({text:d.slice($),highlight:!1}),s}),j=f(`${R}.contactInfo`),Z=f(`${R}.formTitle`),w=Q({name:"",phone:"",email:"",organize:"",message:""}),G=()=>{Object.keys(w).forEach(d=>{w[d]=""})},g=Q({name:"",phone:"",email:"",message:""});function l(d){return f(`${R}.validate.${d}`).value}const u=Q({enterName:l("enterName"),nameFormate:l("nameFormate"),enterPhone:l("enterPhone"),phoneFormate:l("phoneFormate"),enterEmail:l("enterEmail"),enterMessage:l("enterMessage")}),v=async()=>{let d=!0;const s=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,O=/^[\u4e00-\u9fa5a-zA-Z\s\-\\.]+$/,$=/^\d+$/,I={name:i=>i?O.test(i)?"":u.nameFormate:u.enterName,phone:i=>i?$.test(i)?"":u.phoneFormate:u.enterPhone,email:i=>!i||!s.test(i)?`${u.enterEmail} ( user@example.com )`:"",message:i=>i?"":u.enterMessage};for(const i in I){const n=I[i],c=w[i]??"";if(n){const P=n(c);g[i]=P,P&&(d=!1)}}return d},_=k(""),F=k(!1),m=k(!1),J=async()=>{if(!b.value)return alert("someting wrong. please reload page and try again.");if(await v()){_.value="",m.value=!0;try{await $fetch("/api/verify-captcha",{method:"POST",body:{captchaResponse:z.value}}),await $fetch("/api/contact",{method:"POST",body:w}),_.value="success",m.value=!1,F.value=!0,G()}catch(d){throw _.value="error",m.value=!1,d}finally{b.value=!1,p.value=!1,S.value=!1,z.value=null,window.grecaptcha&&window.grecaptcha.reset()}}};return(d,s)=>{const O=oe,$=ae,I=ce,i=be;return o(),a("div",null,[t("div",Ue,[t("div",Fe,[C(O,{alt:"banner",class:"min-w-[1600px]",path:"/images/content/banner.jpg"})])]),C(I,{class:"py-30"},{default:q(()=>[t("div",Oe,[t("div",Ne,[t("div",null,[t("h1",He,[(o(!0),a(E,null,M(e(U),n=>(o(),a(E,{key:n},[n.highlight?(o(),a("span",We,r(n.text),1)):(o(),a("span",je,r(n.text),1))],64))),128))]),t("p",Le,r(e(D)),1)]),t("div",qe,[(o(!0),a(E,null,M(e(j),n=>(o(),a("div",{key:n,class:"grid gap-2 max-w-lg"},[t("h2",Ke,r(n.title),1),t("p",null,r(n.description),1),t("div",Ze,[t("div",Ge,[C($,{icon:n.icon},null,8,["icon"])]),t("p",null,r(n.contact.split(",").join("@")),1)])]))),128))])]),t("form",{class:"max-lg:mt-15 sm:max-w-[450px] max-lg:mx-auto h-full w-full border-lineGreen border rounded-xl p-5",onSubmit:s[2]||(s[2]=L(n=>e(m)?null:J(),["prevent"]))},[t("div",Je,[(o(!0),a(E,null,M(e(Z),(n,c)=>(o(),a("div",{key:c,class:"text-white"},[t("p",null,[K(r(n)+" ",1),Object.keys(e(g)).includes(String(c))?(o(),a("span",{key:0,class:V({"text-warning":e(g)[c]})},"*",2)):W("",!0)]),c!=="message"?X((o(),a("input",{key:0,"onUpdate:modelValue":P=>e(w)[c]=P,class:V([{"!border-warning":e(g)[c]},"px-2 w-full mt-1 bg-[#464C5E] border-[#84D5BD]/20 border rounded-lg leading-[40px]"]),onKeydown:P=>e(g)[c]=""},null,42,Qe)),[[se,e(w)[c]]]):X((o(),a("textarea",{key:1,"onUpdate:modelValue":P=>e(w)[c]=P,class:V([{"!border-warning":e(g)[c]},"block max-h-80 min-h-30 px-2 w-full mt-1 bg-[#464C5E] border-[#84D5BD]/20 border rounded-lg"]),onKeydown:P=>e(g)[c]=""},null,42,Xe)),[[se,e(w)[c]]]),X(t("span",{class:V(["text-xs",{"text-warning":e(g)[c]}])},r(e(g)[c]),3),[[pe,e(g)[c]]])]))),128))]),t("div",Ye,[t("input",{class:"cursor-pointer accent-secondary",type:"checkbox",checked:e(p),onClick:s[0]||(s[0]=L(n=>y.value=!0,["prevent"]))},null,8,et),t("label",{class:"pl-2 cursor-pointer underline underline-offset-4 text-[#e8d794]/70",onClick:s[1]||(s[1]=L(n=>y.value=!0,["prevent"]))},r(e(h)),1)]),t("button",{disabled:e(m)||!e(p),class:V([{"cursor-pointer bg-secondary":!e(m)&&e(p),"bg-gray opacity-15":!e(p)},"w-full rounded-lg font-bold h-11 mt-3 border-secondary/40 border flex justify-center items-center gap-1"]),type:"submit"},[t("span",null,[C($,{class:V(["mt-0.5",{"rotate-full text-secondary":e(m)}]),size:"22",icon:e(m)?"mdiLoading":"mdiEmail"},null,8,["class","icon"])]),e(m)?W("",!0):(o(),a("span",nt,r(e(T)),1))],10,tt)],32)])]),_:1}),e(F)?(o(),ne(i,{key:0,content:e(B),onConfirm:s[3]||(s[3]=n=>F.value=!1)},null,8,["content"])):W("",!0),e(y)?(o(),ne(e(De),{key:1,"privacy-open":e(y),"onUpdate:privacyOpen":s[4]||(s[4]=n=>H(y)?y.value=n:null),"agree-check":e(S),"onUpdate:agreeCheck":s[5]||(s[5]=n=>H(S)?S.value=n:null),"captcha-verified":e(b),"onUpdate:captchaVerified":s[6]||(s[6]=n=>H(b)?b.value=n:null),"recaptcha-response":e(z),"onUpdate:recaptchaResponse":s[7]||(s[7]=n=>H(z)?z.value=n:null),"verified-all-pass":e(p),"onUpdate:verifiedAllPass":s[8]||(s[8]=n=>H(p)?p.value=n:null)},null,8,["privacy-open","agree-check","captcha-verified","recaptcha-response","verified-all-pass"])):W("",!0)])}}});export{ct as default};
